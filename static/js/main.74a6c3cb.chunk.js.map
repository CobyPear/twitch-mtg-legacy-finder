{"version":3,"sources":["utils/API.js","components/StreamerCard.js","components/Cards.js","App.js","reportWebVitals.js","index.js"],"names":["API","getStreams","token","a","fetch","method","headers","process","req","json","resp","console","log","getNextPage","currentPage","StreamerCard","title","streamer","thumb","thumbnail","toString","replace","className","target","rel","href","src","alt","data-text","Cards","legacyStreams","id","length","map","stream","user_name","thumbnail_url","App","window","location","split","URL","useState","setLegacyStreams","setCurrentPage","JSON","parse","localStorage","getItem","closed","setClosed","filter","setFilter","useEffect","data","pagination","cursor","cherryPickStreams","onscroll","innerHeight","scrollY","document","body","offsetHeight","nextPage","streams","filtered","toLowerCase","includes","newStreams","Set","prevState","hideMessage","setItem","onClick","getElementById","innerHTML","style","display","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.74a6c3cb.chunk.js","sourcesContent":["export const API = {\r\n    getStreams: async function(token) {\r\n        try {\r\n            // mtg game id: 2748\r\n            const req = await fetch('https://api.twitch.tv/helix/streams?game_id=2748&first=100', {\r\n                method: 'GET',\r\n                headers: {\r\n                    \"Authorization\": `Bearer ${token}`,\r\n                    \"client-id\": process.env.REACT_APP_CLIENT_ID,\r\n                }\r\n            })\r\n            const resp = await req.json()\r\n            return resp\r\n\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    },\r\n    getNextPage: async function(token, currentPage) {\r\n        try {\r\n            const req = await fetch(`https://api.twitch.tv/helix/streams?game_id=2748&after=${currentPage}`, {\r\n                method: 'GET',\r\n                headers: {\r\n                    \"Authorization\": `Bearer ${token}`,\r\n                    \"client-id\": process.env.REACT_APP_CLIENT_ID,\r\n                }\r\n            })\r\n            const resp = await req.json()\r\n            return resp\r\n\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n}","import React from 'react'\r\n\r\nconst StreamerCard = ({ title, streamer, thumbnail }) => {\r\n    let thumb = thumbnail.toString().replace('{width}', '500').replace('{height}', '250')\r\n    return (\r\n        <div className='card'>\r\n            <div className=\"card-header\">\r\n                <h1>{streamer}</h1>\r\n            </div>\r\n            <div className=\"card-body\">\r\n                <h2>{title}</h2>\r\n                <div className=\"img-link-container\">\r\n                    <a target='_blank' rel='noreferrer' href={`https://twitch.tv/${streamer}`}>\r\n                        <img src={thumb} alt={`${streamer}'s stream thumbnail`} />\r\n                        <span className=\"tooltip\" data-text={`click to open ${streamer}'s stream`}>\r\n                        </span>\r\n                    </a>\r\n                    <div className=\"spacer\"></div>\r\n                    <a className='link-button' rel='noreferrer' target='_blank' href={`https://twitch.tv/${streamer}`}>\r\n                        Go to {streamer}'s stream!\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default StreamerCard\r\n","import React from 'react'\r\nimport StreamerCard from './StreamerCard'\r\n\r\nconst Cards = ({legacyStreams}) => {\r\n    return (\r\n        <div id='cards'>\r\n            {   legacyStreams?.length &&\r\n                legacyStreams?.map(stream => {\r\n                    return <StreamerCard\r\n                        key={stream.id}\r\n                        title={stream.title}\r\n                        streamer={stream.user_name}\r\n                        thumbnail={stream.thumbnail_url}\r\n                    />\r\n\r\n                })\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Cards\r\n","import { useState, useEffect } from 'react'\nimport { API } from './utils/API'\n\nimport Cards from './components/Cards'\n\nfunction App() {\n  const responseType = 'token'\n  const redirectURI = process.env.NODE_ENV !== 'production' ? 'http://localhost:3000' : 'https://cobypear.github.io/twitch-mtg-legacy-finder' // replace with production URI\n  const scopes = 'openid'\n  // console.log(process.env.REACT_APP_CLIENT_ID)\n  const claims = ''\n  const token = window.location.href.split('=')[1]?.split('&')[0] || ''\n\n  const URL = `https://id.twitch.tv/oauth2/authorize?client_id=${process.env.REACT_APP_CLIENT_ID}&redirect_uri=${redirectURI}&response_type=${responseType}&scope=${scopes}&claims=${claims}&force_verify=true`\n\n  const [legacyStreams, setLegacyStreams] = useState([])\n  const [currentPage, setCurrentPage] = useState()\n  const [closed, setClosed] = useState(JSON.parse(localStorage.getItem('closed')) || false);\n  const [filter, setFilter] = useState('legacy')\n\n  useEffect(() => {\n    if (token) {\n      (async () => {\n        const { data, pagination } = await API.getStreams(token)\n        setCurrentPage(pagination.cursor)\n        cherryPickStreams(data)\n\n      })()\n    }\n  }, [token, filter])\n\n\n  useEffect(() => {\n    window.onscroll = function () {\n      if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {\n        nextPage()\n      }\n    }\n  })\n\n\n  // pick out streams based on filter. default legacy\n  const cherryPickStreams = streams => {\n    let filtered = streams?.filter(stream => stream.title.toLowerCase().includes(filter))\n    // console.log(...filtered)\n    let newStreams = [...new Set(filtered)]\n    // console.log(newStreams)\n    setLegacyStreams(prevState => {\n      return prevState ? [...prevState, ...newStreams] : [...newStreams]\n    })\n\n  }\n\n\n  // call the API again, ask for the next page\n  const nextPage = async () => {\n    if (currentPage) {\n      const { data, pagination } = await API.getNextPage(token, currentPage)\n      setCurrentPage(pagination.cursor ? pagination.cursor : '')\n      cherryPickStreams(data)\n    }\n  }\n\n  const hideMessage = () => {\n    setClosed(!closed)\n    localStorage.setItem('closed', !closed)\n  }\n\n\n  return (\n    <div className='main-container'>\n      <button\n      onClick={() => {\n        const cards = document.getElementById('cards')\n        cards.innerHTML =''\n        setFilter(filter === 'legacy' ? 'modern' : 'legacy')\n      }}>\n        switch to {`${filter === 'legacy' ? 'modern' : 'legacy'}`}\n      </button>\n      {\n        !closed ? (\n        <div className=\"message\" style={{ display: closed ? 'none' : 'flex' }}>\n          <h1>Welcome to Twitch M:tG Legacy Finder</h1>\n          <button onClick={hideMessage}>x</button>\n          <p>How does it work?</p>\n          <p>1. Click Login to login to your Twitch account <a href=\"https://github.com/CobyPear/twitch-mtg-legacy-finder#question-why-do-i-need-to-login-to-twitch\" id='why'>Why do I need to do this?</a></p>\n          <p>2. Browse live Magic: the Gathering streamers currently playing the best (Legacy) format</p>\n          <p>3. ???</p>\n          <p>4. Profit!</p>\n          <a className='link-button' href={URL}>Login</a>\n        </div>\n        ) : (\n          <button id='show-message' onClick={hideMessage}>show message</button>\n        )\n\n      }\n      { legacyStreams && <Cards legacyStreams={legacyStreams} />}\n\n      <footer>\n        <span>&copy; <a href=\"https://cobysher.dev\">Coby Sher</a> 2021</span>\n      </footer>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}