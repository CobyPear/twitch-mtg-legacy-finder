(this["webpackJsonptwitch-mtg-legacy-finder"]=this["webpackJsonptwitch-mtg-legacy-finder"]||[]).push([[0],{14:function(e,t,c){},17:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),a=c(9),i=c.n(a),s=(c(14),c(5)),o=c(2),l=c.n(o),d=c(3),h=c(6),u={getStreams:function(){var e=Object(d.a)(l.a.mark((function e(t){var c,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.twitch.tv/helix/streams?game_id=2748&first=100",{method:"GET",headers:{Authorization:"Bearer ".concat(t),"client-id":"po7qw7qlnkajp4a5lf72h83x4dmzod"}});case 3:return c=e.sent,e.next=6,c.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),getNextPage:function(){var e=Object(d.a)(l.a.mark((function e(t,c){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.twitch.tv/helix/streams?game_id=2748&after=".concat(c),{method:"GET",headers:{Authorization:"Bearer ".concat(t),"client-id":"po7qw7qlnkajp4a5lf72h83x4dmzod"}});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,c){return e.apply(this,arguments)}}()},j=c(0),b=function(e){var t=e.title,c=e.streamer,n=e.thumbnail.toString().replace("{width}","500").replace("{height}","250");return Object(j.jsxs)("div",{className:"card",children:[Object(j.jsx)("div",{className:"card-header",children:Object(j.jsx)("h1",{children:c})}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h2",{children:t}),Object(j.jsxs)("div",{className:"img-link-container",children:[Object(j.jsxs)("a",{target:"_blank",rel:"noreferrer",href:"https://twitch.tv/".concat(c),children:[Object(j.jsx)("img",{src:n,alt:"".concat(c,"'s stream thumbnail")}),Object(j.jsx)("span",{className:"tooltip","data-text":"click to open ".concat(c,"'s stream")})]}),Object(j.jsx)("div",{className:"spacer"}),Object(j.jsxs)("a",{className:"link-button",rel:"noreferrer",target:"_blank",href:"https://twitch.tv/".concat(c),children:["Go to ",c,"'s stream!"]})]})]})]})},p=function(e){var t=e.legacyStreams;return Object(j.jsx)("div",{id:"cards",children:(null===t||void 0===t?void 0:t.length)&&(null===t||void 0===t?void 0:t.map((function(e){return Object(j.jsx)(b,{title:e.title,streamer:e.user_name,thumbnail:e.thumbnail_url},e.id)})))})};var f=function(){var e,t=(null===(e=window.location.href.split("=")[1])||void 0===e?void 0:e.split("&")[0])||"",c="https://id.twitch.tv/oauth2/authorize?client_id=".concat("po7qw7qlnkajp4a5lf72h83x4dmzod","&redirect_uri=").concat("https://cobypear.github.io/twitch-mtg-legacy-finder","&response_type=").concat("token","&scope=").concat("openid","&claims=").concat("","&force_verify=true"),r=Object(n.useState)([]),a=Object(h.a)(r,2),i=a[0],o=a[1],b=Object(n.useState)(),f=Object(h.a)(b,2),m=f[0],g=f[1],x=Object(n.useState)(JSON.parse(localStorage.getItem("closed"))||!1),O=Object(h.a)(x,2),v=O[0],w=O[1],y=Object(n.useState)("legacy"),k=Object(h.a)(y,2),S=k[0],N=k[1];Object(n.useEffect)((function(){t&&Object(d.a)(l.a.mark((function e(){var c,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.getStreams(t);case 2:c=e.sent,n=c.data,r=c.pagination,g(r.cursor),C(n);case 7:case"end":return e.stop()}}),e)})))()}),[t,S]),Object(n.useEffect)((function(){window.onscroll=function(){window.innerHeight+window.scrollY>=document.body.offsetHeight&&_()}}));var C=function(e){var t=null===e||void 0===e?void 0:e.filter((function(e){return e.title.toLowerCase().includes(S)})),c=Object(s.a)(new Set(t));o((function(e){return e?[].concat(Object(s.a)(e),Object(s.a)(c)):Object(s.a)(c)}))},_=function(){var e=Object(d.a)(l.a.mark((function e(){var c,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=8;break}return e.next=3,u.getNextPage(t,m);case 3:c=e.sent,n=c.data,r=c.pagination,g(r.cursor?r.cursor:""),C(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){w(!v),localStorage.setItem("closed",!v)};return Object(j.jsxs)("div",{className:"main-container",children:[Object(j.jsxs)("button",{onClick:function(){document.getElementById("cards").innerHTML="",N("legacy"===S?"modern":"legacy")},children:["switch to ","".concat("legacy"===S?"modern":"legacy")]}),v?Object(j.jsx)("button",{id:"show-message",onClick:L,children:"show message"}):Object(j.jsxs)("div",{className:"message",style:{display:v?"none":"flex"},children:[Object(j.jsx)("h1",{children:"Welcome to Twitch M:tG Legacy Finder"}),Object(j.jsx)("button",{onClick:L,children:"x"}),Object(j.jsx)("p",{children:"How does it work?"}),Object(j.jsxs)("p",{children:["1. Click Login to login to your Twitch account ",Object(j.jsx)("a",{href:"https://github.com/CobyPear/twitch-mtg-legacy-finder#why-do-i-need-to-login-to-twitch",id:"why",children:"Why do I need to do this?"})]}),Object(j.jsx)("p",{children:"2. Browse live Magic: the Gathering streamers currently playing the best (Legacy) format"}),Object(j.jsx)("p",{children:"3. ???"}),Object(j.jsx)("p",{children:"4. Profit!"}),Object(j.jsx)("a",{className:"link-button",href:c,children:"Login"})]}),i&&Object(j.jsx)(p,{legacyStreams:i}),Object(j.jsx)("footer",{children:Object(j.jsxs)("span",{children:["\xa9 ",Object(j.jsx)("a",{href:"https://cobysher.dev",children:"Coby Sher"})," 2021"]})})]})},m=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,18)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;c(e),n(e),r(e),a(e),i(e)}))};i.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(f,{})}),document.getElementById("root")),m()}},[[17,1,2]]]);
//# sourceMappingURL=main.76f502ab.chunk.js.map