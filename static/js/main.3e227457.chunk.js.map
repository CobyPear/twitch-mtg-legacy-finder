{"version":3,"sources":["utils/API.js","components/StreamerCard.js","components/Cards.js","App.js","reportWebVitals.js","index.js"],"names":["API","getStreams","token","a","fetch","method","headers","process","req","json","resp","console","log","getNextPage","currentPage","StreamerCard","title","streamer","thumbnail","toString","replace","thumb","className","target","rel","href","src","alt","data-text","Cards","legacyStreams","length","map","stream","user_name","thumbnail_url","id","App","window","location","split","URL","useState","setLegacyStreams","setCurrentPage","JSON","parse","localStorage","getItem","closed","setClosed","useEffect","data","pagination","cursor","cherryPickStreams","onscroll","innerHeight","scrollY","document","body","offsetHeight","nextPage","streams","filtered","filter","toLowerCase","includes","newStreams","Set","prevState","hideMessage","setItem","onClick","style","display","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3e227457.chunk.js","sourcesContent":["export const API = {\r\n    getStreams: async function(token) {\r\n        try {\r\n            // mtg game id: 2748\r\n            const req = await fetch('https://api.twitch.tv/helix/streams?game_id=2748&first=100', {\r\n                method: 'GET',\r\n                headers: {\r\n                    \"Authorization\": `Bearer ${token}`,\r\n                    \"client-id\": process.env.REACT_APP_CLIENT_ID,\r\n                }\r\n            })\r\n            const resp = await req.json()\r\n            return resp\r\n\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    },\r\n    getNextPage: async function(token, currentPage) {\r\n        try {\r\n            const req = await fetch(`https://api.twitch.tv/helix/streams?game_id=2748&after=${currentPage}`, {\r\n                method: 'GET',\r\n                headers: {\r\n                    \"Authorization\": `Bearer ${token}`,\r\n                    \"client-id\": process.env.REACT_APP_CLIENT_ID,\r\n                }\r\n            })\r\n            const resp = await req.json()\r\n            return resp\r\n\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n}","import React from 'react'\r\n\r\nconst StreamerCard = ({ title, streamer, thumbnail }) => {\r\n    console.log(thumbnail.toString().replace('{width}', '250').replace('{height}', '250'))\r\n    let thumb = thumbnail.toString().replace('{width}', '500').replace('{height}', '250')\r\n    return (\r\n        <div className='card'>\r\n            <div className=\"card-header\">\r\n                <h1>{streamer}</h1>\r\n            </div>\r\n            <div className=\"card-body\">\r\n                <h2>{title}</h2>\r\n                <div className=\"img-link-container\">\r\n                    <a target='_blank' rel='noreferrer' href={`https://twitch.tv/${streamer}`}>\r\n                        <img src={thumb} alt={`${streamer}'s stream thumbnail`} />\r\n                        <span className=\"tooltip\" data-text={`click to open ${streamer}'s stream`}>\r\n                        </span>\r\n                    </a>\r\n                    <div className=\"spacer\"></div>\r\n                    <a className='link-button' rel='noreferrer' target='_blank' href={`https://twitch.tv/${streamer}`}>\r\n                        Go to {streamer}'s stream!\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default StreamerCard\r\n","import React from 'react'\r\nimport StreamerCard from './StreamerCard'\r\n\r\nconst Cards = ({legacyStreams}) => {\r\n    console.log(legacyStreams)\r\n    return (\r\n        <>\r\n            {   legacyStreams?.length &&\r\n                legacyStreams?.map(stream => {\r\n                    console.log(stream)\r\n                    return <StreamerCard\r\n                        key={stream.id}\r\n                        title={stream.title}\r\n                        streamer={stream.user_name}\r\n                        thumbnail={stream.thumbnail_url}\r\n                    />\r\n\r\n                })\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Cards\r\n","import { useState, useEffect } from 'react'\nimport { API } from './utils/API'\n\nimport Cards from './components/Cards'\n\nfunction App() {\n  const responseType = 'token'\n  const redirectURI = process.env.NODE_ENV !== 'production' ? 'http://localhost:3000' : 'https://cobypear.github.io/twitch-mtg-legacy-finder' // replace with production URI\n  const scopes = 'openid'\n  // console.log(process.env.REACT_APP_CLIENT_ID)\n  const claims = ''\n  const token = window.location.href.split('=')[1]?.split('&')[0] || ''\n\n  const URL = `https://id.twitch.tv/oauth2/authorize?client_id=${process.env.REACT_APP_CLIENT_ID}&redirect_uri=${redirectURI}&response_type=${responseType}&scope=${scopes}&claims=${claims}&force_verify=true`\n\n  let [legacyStreams, setLegacyStreams] = useState([])\n  let [currentPage, setCurrentPage] = useState()\n  const [closed, setClosed] = useState(JSON.parse(localStorage.getItem('closed')) || false);\n\n  useEffect(() => {\n    if (token) {\n      (async () => {\n        const { data, pagination } = await API.getStreams(token)\n        setCurrentPage(pagination.cursor)\n        cherryPickStreams(data)\n\n      })()\n    }\n  }, [token])\n\n\n  useEffect(() => {\n    window.onscroll = function () {\n      if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {\n        nextPage()\n      }\n    }\n  })\n\n\n  const cherryPickStreams = streams => {\n    let filtered = streams?.filter(stream => stream.title.toLowerCase().includes('legacy'))\n    // console.log(...filtered)\n    let newStreams = [...new Set(filtered)]\n    console.log(newStreams)\n    setLegacyStreams(prevState => {\n      return prevState ? [...prevState, ...newStreams] : [...newStreams]\n    })\n\n  }\n\n\n  const nextPage = async () => {\n    console.log('hello')\n    // console.log(token)\n    if (currentPage) {\n      const { data, pagination } = await API.getNextPage(token, currentPage)\n      setCurrentPage(pagination.cursor ? pagination.cursor : '')\n      cherryPickStreams(data)\n      console.log(currentPage)\n      console.log('debug', legacyStreams)\n    }\n  }\n\n  const hideMessage = () => {\n    console.log('before', closed)\n    setClosed(!closed)\n    console.log('after', closed)\n    localStorage.setItem('closed', !closed)\n  }\n\n\n  return (\n    <div className='main-container'>\n      {\n        !closed ? (\n        <div className=\"message\" style={{ display: closed ? 'none' : 'flex' }}>\n          <h1>Welcome to Twitch M:tG Legacy Finder</h1>\n          <button onClick={hideMessage}>x</button>\n          <p>How does it work?</p>\n          <p>1. Click Login to login to your Twitch account <a href=\"#\" id='why'>Why do I need to do this?</a></p>\n          <p>2. Browse live Magic: the Gathering streamers currently playing the best (Legacy) format</p>\n          <p>3. ???</p>\n          <p>4. Profit!</p>\n          <a className='link-button' href={URL}>Login</a>\n        </div>\n        ) : (\n          <button id='show-message' onClick={hideMessage}>show message</button>\n        )\n\n      }\n      { legacyStreams && <Cards legacyStreams={legacyStreams} />}\n\n      <footer>\n        <span>&copy; <a href=\"https://cobysher.dev\">Coby Sher</a> 2021</span>\n      </footer>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}